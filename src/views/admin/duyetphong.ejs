<%- include('./layout/header') %>

<div class="container mt-4">
  <h3>üìã Danh s√°ch ch·ªó ·ªü ch·ªù duy·ªát</h3>

  <table class="table table-striped mt-3">
    <thead>
      <tr>
        <th>#</th>
        <th>S·ªë ph√≤ng</th>
        <th>ƒê·ªãa ch·ªâ</th>
         <th>Ng∆∞·ªùi ƒëƒÉng</th>
        <th>Tr·∫°ng th√°i</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>
    <tbody>
      <% if (rooms && rooms.length > 0) { %>
        <% rooms.forEach(room => { %>
          <tr>
            <td><%= room.MaPhong %></td>
            <td><%= room.SoPhong %></td>
            <td><%= room.DiaChi %></td>
             <td><%= room.Username || 'Kh√¥ng x√°c ƒë·ªãnh' %></td> 
            <td>
  <span class="badge bg-secondary"><%= room.TrangThaiPhong %></span>
</td>
            <td>
              <a href="/admin/duyetphong/<%= room.MaPhong %>" class="btn btn-info btn-sm">Xem chi ti·∫øt</a>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="5" class="text-center text-muted">Kh√¥ng c√≥ ph√≤ng n√†o ch·ªù duy·ªát.</td>
        </tr>
      <% } %>
    </tbody>
  </table>
</div>
<script>
  const params = new URLSearchParams(window.location.search);

  if (params.get('approved') === '1') {
    alert('Ph√™ duy·ªát ph√≤ng th√†nh c√¥ng!');
    window.history.replaceState({}, document.title, window.location.pathname);
  } 
  else if (params.get('rejected') === '1') {
    alert('Ph√≤ng ƒë√£ b·ªã t·ª´ ch·ªëi th√†nh c√¥ng!');
    window.history.replaceState({}, document.title, window.location.pathname);
  } 
  else if (params.get('error') === '1') {
    alert('C√≥ l·ªói x·∫£y ra khi x·ª≠ l√Ω y√™u c·∫ßu!');
    window.history.replaceState({}, document.title, window.location.pathname);
  }
</script>

<%- include('./layout/footer') %>
