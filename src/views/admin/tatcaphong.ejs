<%- include('./layout/header') %>

<div class="container mt-4">
  <h3 class="fw-bold mb-4">üè† Danh s√°ch t·∫•t c·∫£ ch·ªó ·ªü</h3>

  <div class="table-responsive shadow-sm rounded-3">
    <table class="table table-hover align-middle">
      <thead class="table-primary text-center">
        <tr>
          <th>#</th>
          <th>S·ªë ph√≤ng</th>
          <th>ƒê·ªãa ch·ªâ</th>
          <th>Lo·∫°i ph√≤ng</th>
          <th>Ch·ªß s·ªü h·ªØu</th>
          <th>Tr·∫°ng th√°i</th>
          <th>Thao t√°c</th>
        </tr>
      </thead>
      <tbody>
        <% if (rooms && rooms.length > 0) { %>
          <% rooms.forEach(room => { %>
            <tr>
              <td class="text-center"><%= room.MaPhong %></td>
              <td><%= room.SoPhong %></td>
              <td><%= room.DiaChi %></td>
              <td><%= room.TenLoaiPhong || "Kh√¥ng r√µ" %></td>
              <td><%= room.Username || "Kh√¥ng r√µ" %></td>
              <td>
                <% if (room.TrangThaiPhong === 'Ch·ªù x√©t duy·ªát') { %>
                  <span class="badge bg-secondary">Ch·ªù x√©t duy·ªát</span>
                <% } else if (room.TrangThaiPhong === 'ƒêang ho·∫°t ƒë·ªông') { %>
                  <span class="badge bg-success">ƒêang ho·∫°t ƒë·ªông</span>
                <% } else if (room.TrangThaiPhong === 'ƒê√£ t·ª´ ch·ªëi') { %>
                  <span class="badge bg-danger">ƒê√£ t·ª´ ch·ªëi</span>
                <% } else { %>
                  <span class="badge bg-warning text-dark"><%= room.TrangThaiPhong %></span>
                <% } %>
              </td>
              <td class="text-center">
                <a href="/admin/duyetphong/<%= room.MaPhong %>" class="btn btn-sm btn-outline-primary">üîç Xem</a>
                <form action="/admin/duyetphong/xoaphong/<%= room.MaPhong %>" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ph√≤ng n√†y kh√¥ng?');">
                      üóëÔ∏è X√≥a
                    </button>
</form>

              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="7" class="text-center text-muted py-4">Kh√¥ng c√≥ ch·ªó ·ªü n√†o trong h·ªá th·ªëng.</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>
<script>
  const params = new URLSearchParams(window.location.search);
  if (params.get('deleted') === '1') {
    alert(' X√≥a ph√≤ng th√†nh c√¥ng!');
    // X√≥a query kh·ªèi URL ƒë·ªÉ kh√¥ng hi·ªán l·∫°i khi refresh
    window.history.replaceState({}, document.title, window.location.pathname);
  }
</script>

<%- include('./layout/footer') %>


