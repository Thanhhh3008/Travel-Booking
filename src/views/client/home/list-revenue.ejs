
<%- include('../layout/header') %>
 <style>
    /* ======================== PAGE STYLE ======================== */
    .page-revenue {
      padding: 40px 0;
      font-family: "Inter", sans-serif;
    }

    .revenue-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .revenue-header h2 {
      font-size: 32px;
      font-weight: 700;
    }

    .revenue-header p {
      color: #555;
    }

    /* ======== OVERVIEW CARDS ======== */
    .revenue-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .card {
      padding: 20px;
      border-radius: 12px;
      background: white;
      border: 1px solid #e5e7eb;
      text-align: left;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .card i {
      font-size: 24px;
      color: #2563eb;
      margin-bottom: 10px;
    }

    .card h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      color: #374151;
    }

    .card .value {
      font-size: 22px;
      margin-top: 5px;
      font-weight: 700;
      color: #111827;
    }

    /* ======== FILTER BAR ======== */
    .filter-bar {
      margin-bottom: 25px;
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    .filter-bar select {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    /* ======== TABLE ======== */
    .revenue-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }

    .revenue-table th {
      background: #2563eb;
      color: white;
      padding: 12px;
      text-align: left;
    }

    .revenue-table td {
      padding: 10px 12px;
      border-bottom: 1px solid #e5e7eb;
    }

    .revenue-table tr:hover {
      background: #f9fafb;
    }

    .no-data {
      text-align: center;
      padding: 20px;
      color: #555;
    }
  </style>
<main class="page-revenue">
  <div class="container">

    <div class="revenue-header">
      <h2><i class="fa-solid fa-chart-line"></i> Doanh thu của bạn</h2>
      <p>Xem và quản lý doanh thu từ phòng và dịch vụ</p>
    </div>

    <!-- =================== DASHBOARD CARDS =================== -->
    <div class="revenue-cards">
      <div class="card">
        <i class="fa-solid fa-bed"></i>
        <h3>Doanh thu phòng</h3>
        <div class="value"><%= helpers.formatMoney(sumPhong) %></div>
      </div>

      <div class="card">
        <i class="fa-solid fa-concierge-bell"></i>
        <h3>Doanh thu dịch vụ</h3>
        <div class="value"><%= helpers.formatMoney(sumDichVu) %></div>
      </div>

      <div class="card">
        <i class="fa-solid fa-sack-dollar"></i>
        <h3>Tổng doanh thu</h3>
        <div class="value"><%= helpers.formatMoney(sumPhong + sumDichVu) %></div>
      </div>

      <div class="card">
        <i class="fa-solid fa-receipt"></i>
        <h3>Số giao dịch</h3>
        <div class="value"><%= revenues.length %></div>
      </div>
    </div>

    <!-- =================== FILTER =================== -->
    <div class="filter-bar">
      <select id="filter-time">
        <option value="">-- Lọc thời gian --</option>
        <option value="7">7 ngày gần nhất</option>
        <option value="30">30 ngày gần nhất</option>
        <option value="90">3 tháng gần nhất</option>
        <option value="365">1 năm gần nhất</option>
      </select>
    </div>

    <!-- =================== TABLE =================== -->
    <table class="revenue-table">
      <thead>
        <tr>
          <th>Mã</th>
          <th>Ngày lập</th>
          <th>Doanh thu phòng</th>
          <th>Doanh thu dịch vụ</th>
          <th>Tổng</th>
          <th>Mô tả</th>
        </tr>
      </thead>

      <tbody>
        <% if (revenues.length === 0) { %>
          <tr><td colspan="6" class="no-data">Không có doanh thu nào.</td></tr>
        <% } %>

        <% revenues.forEach(r => { %>
          <tr>
            <td><%= r.MaDoanhThu %></td>
            <td><%= helpers.formatDateTime(r.NgayLap) %></td>
            <td><%= helpers.formatMoney(r.DoanhThuTuPhong) %></td>
            <td><%= helpers.formatMoney(r.DoanhThuTuDichVu) %></td>
            <td><%= helpers.formatMoney(helpers.calcTotal(r)) %></td>
            <td><%= r.MoTa %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

  </div>
</main>

<%- include('../layout/footer') %>
</body>

