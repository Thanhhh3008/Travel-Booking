<%- include('../layout/header.ejs') %>
<main class="auth-shell">
  <section class="auth-card">
    <div class="auth-head">
      <div>ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</div>
      <a class="link" href="/login.html">ƒêƒÉng nh·∫≠p</a>
    </div>
    <div class="auth-body">
      <h1 class="auth-title">T·∫°o m·∫≠t kh·∫©u m·ªõi üîê</h1>
      <p style="color: #666; margin-bottom: 24px; font-size: 14px;">
        Email: <strong><%= user1.email %></strong>
      </p>

      <form action="/update-password-by-email" method="POST">
        <input type="hidden" name="token" value="<%= token1 %>">
        <input type="hidden" name="email" value="<%= user1.email %>">

        <label class="auth-label" for="new-password">M·∫≠t kh·∫©u m·ªõi</label>
        <input 
          type="password" 
          name="newPassword" 
          id="new-password" 
          class="auth-input"
          placeholder="T·ªëi thi·ªÉu 8 k√Ω t·ª±"
          required
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$"
          title="M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±, g·ªìm ch·ªØ hoa, ch·ªØ th∆∞·ªùng v√† s·ªë"
        >
        <small style="color: #666; font-size: 13px; display: block; margin-top: 4px;">
          Ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±, bao g·ªìm ch·ªØ hoa, ch·ªØ th∆∞·ªùng v√† s·ªë
        </small>

        <label class="auth-label" for="confirm-password" style="margin-top: 16px;">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
        <input 
          type="password" 
          name="confirmPassword" 
          id="confirm-password" 
          class="auth-input"
          placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
          required
        >

        <div style="margin-top: 24px;">
          <button type="submit" class="auth-btn">ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</button>
        </div>
      </form>
    </div>
  </section>
</main>

<script>
// Ki·ªÉm tra m·∫≠t kh·∫©u kh·ªõp nhau
document.querySelector('form').addEventListener('submit', function(e) {
  const newPass = document.getElementById('new-password').value;
  const confirmPass = document.getElementById('confirm-password').value;
  
  if (newPass !== confirmPass) {
    e.preventDefault();
    alert('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!');
  }
});
</script>

<%- include('../layout/footer.ejs') %>